# Лабораторная работа №1

**Тема:** Формулирование требований к программной системе
**Цель работы:** Научиться анализировать поставленную задачу, формулировать функциональные и нефункциональные требования к проектируемой системе.
**Ожидаемые результаты:**
1.  Перечень заинтересованных лиц (стейкхолдеров) с краткими описаниями (2 балла)
2.  Перечень функциональных требований (2 балла)
3.  Диаграмма вариантов использования для функциональных требований (2 балла)
4.  Перечень сделанных предположений (всё, что не оговорено в постановке явно можно “додумать” самостоятельно) (2 балла)
5.  Перечень нефункциональных требований (2 балла)

---

**Тема:**  "Разработка веб-приложения для удалённого мониторинга и управления парком 3D-принтеров"

---

## Перечень заинтересованных лиц (стейкхолдеров)

- **Администратор системы**: Основной пользователь системы. Отвечает за загрузку моделей, запуск печати, мониторинг состояния принтеров, пополнение материалов.
- **Заказчик**: Лицо, заказывающее 3D-печать. Может предоставлять модель (3MF). Ожидает расчёт стоимости и сроков.
- **Технический специалист**: Отвечает за обслуживание парка принтеров, подключение новых устройств и решение технических сбоев.
- **Менеджер**: Лицо, принимающее управленческие решения. Смотрит аналитику и статистику: загрузка оборудования, расход материалов, финансовые показатели, для оптимизации процессов и затрат. 

## Перечень функциональных требований

1. **Загрузка и валидация моделей**: Веб-интерфейс системы должен предоставлять возможность загрузки файлов 3D-моделей в формате 3MF. Система должна проверять файл на целостность и соответствие формату.
2. **Анализ модели и расчет параметров**: Система должна автоматически анализировать геометрию загруженной модели и рассчитывать:
    - Объём требуемого материала.
    - Предполагаемое время печати.
    - Стоимость печати на основе заданных тарифов.
3. **История операций**: Система должна сохранять историю загруженных моделей и выполненных расчётов.
4. **Учет материалов**: Система должна предоставлять интерфейс для ведения учета остатков филаментов на складе с указанием типа пластика, цвета, диаметра, веса бобин и даты поступления.
5. **Проверка перед печатью**: Система должна автоматически проверять достаточность материала перед печатью.
6. **Списание материалов**: Система должна автоматически вычитать из остатков израсходованный материал после завершения печати.
7. **Уведомление об окончании пластика**: Система должна уведомлять администратора через веб-интерфейс, когда запас любого материала заканчивается.
8. **Регистрация принтеров**: Система должна предоставлять интерфейс для регистрации новых 3D-принтеров в системе (с указанием имени, модели).
9. **Мониторинг статуса принтеров**: Система должна постоянно проверять зарегистрированные принтеры и отображать их текущий статус: "Свободен", "Печатает", "Ошибка" (с указанием причины, например, "Нет филамента"), "Не в сети".
10. **Отправка на печать**: Система должна позволять администратору выбирать один или несколько принтеров для отправки задания на печать.
11. **Подготовка G-code**: Система должна автоматически генерировать управляющий G-code для выбранной модели и принтера, используя предустановленные профили слайсинга.
12. **Прямая отправка на принтер**: Система (работающая на Orange Pi) должна напрямую передавать подготовленный G-code на выбранный 3D-принтер по сети.
13. **Отслеживание хода печати**: Система должна в реальном времени отображать в веб-интерфейсе прогресс выполнения текущего задания на печать (%), прямую трансляцию печати (если камера имеется), а также получаемую с принтера телеметрию: температуру сопла и стола.
14. **Сбор и визуализация статистики**: Система должна накапливать данные и предоставлять отчеты и графики по следующим метрикам:
    - Расход материалов за выбранный период (день, неделя, месяц).
    - Затраты в разрезе типов пластика.
    - Время работы и коэффициент использования каждого принтера.
    - Количество выполненных заказов и их средняя стоимость.
    - Статистику неудачных печатей.

## Диаграмма вариантов использования
![Image](https://github.com/user-attachments/assets/a31cc64a-0a3d-4367-9cc1-a81f342cc93a)

## Перечень сделанных предположений

1. **Об архитектуре и подключении принтеров**: Предполагается, что система развернута на единой плате Orange Pi, которая выполняет роль веб-сервера и центрального агента для управления принтерами. Все 3D-принтеры поддерживают управление по сети (через протокол HTTP API, как в Klipper) и находятся в одной локальной сети с Orange Pi.
2. **О форматах файлов**: Предполагается, что основным и единственным форматом входной 3D-модели является 3MF. Система не будет поддерживать другие форматы (например, .OBJ, .3MF) без дополнительной доработки.
3. **О тарифах**: Предполагается, что администратор может вручную настроить тарифы (стоимость за грамм материала, стоимость часа работы принтера), которые используются для автоматического расчёта цены.
4. **О камерах**: Предполагается, что встроенные камеры являются частью самих 3D-принтеров. Система должна получать и отображать в веб-интерфейсе видеопотоки. Наличие камеры не является обязательным для всех принтеров, и система должна корректно работать, если видеопоток с какого-либо принтера недоступен.
5. **О сети**: Предполагается, что Orange Pi с развернутой системой, все управляемые 3D-принтеры и рабочие станции пользователей находятся в одной локальной сети. Сетевое взаимодействие между системой на Orange Pi и принтерами является стабильным и имеет минимальную задержку.
6. **О материалах**: Предполагается, что система изначально будет работать с ограниченным набором материалов (PLA, ABS, PETG), и их свойства (плотность, цвет) могут быть заранее внесены в систему. Остальные типы пластика пользователь по желанию может сам внести в систему.
7. **О безопасности**: На начальном этапе предполагается, что система будет использоваться ограниченным кругом доверенных лиц. Все пользователи, имеющие доступ к системе, будут обладать полными правами на управление.

## Перечень нефункциональных требований

1. **Частота обновления данных**: Данные телеметрии (прогресс печати, температура) и статусы принтеров в веб-интерфейсе должны обновляться с интервалом не более 10 секунд для обеспечения эффективного мониторинга в реальном времени.
2. **Масштабируемость**: Архитектура системы должна позволять управлять парком до 15 3D-принтеров с одного сервера (Orange Pi) без значительной снижения производительности.
3. **Надежность**: Потеря связи с одним из 3D-принтеров не должна влиять на работу системы в целом и на управление другими принтерами. Система должна корректно отрабатывать подобные сбои, помечая принтер как "не в сети" и уведомляя пользователя.
4. **Защита данных**: Конфиденциальные данные (пароли, ключи API) должны храниться в базе данных в зашифрованном виде. Передача всех данных между браузером клиента и сервером (Orange Pi) должна осуществляться по защищенному протоколу HTTPS.
5. **Интуитивность интерфейса**: Интерфейс системы должен быть интуитивно понятен для пользователя с базовыми знаниями в 3D-печати. Основные операции (загрузка модели, запуск печати) должны выполняться не более чем в 3 клика.
